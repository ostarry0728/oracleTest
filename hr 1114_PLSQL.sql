-- PL/SQL
-- 내용을 employee 최고경영자의 사원번호, 이름, 연봉을 계산해서 출력하시오. 로우 타입 변수 활용
DECLARE
    --로우 타입 변수선언, 연봉타입선언
    EMP_RECORD EMPLOYEES%ROWTYPE;
    TOTAL_SALARY NUMBER(10,2);
BEGIN
    SELECT * INTO EMP_RECORD
    FROM EMPLOYEES WHERE MANAGER_ID IS NULL;
    
    IF(EMP_RECORD.COMMISSION_PCT IS NULL)THEN
        EMP_RECORD.COMMISSION_PCT := 0;
    END IF;
    TOTAL_SALARY := EMP_RECORD.SALARY * 12 + (EMP_RECORD.SALARY * EMP_RECORD.COMMISSION_PCT); 
    DBMS_OUTPUT.PUT_LINE('사원번호: '|| EMP_RECORD.EMPLOYEE_ID);
    DBMS_OUTPUT.PUT_LINE('이름: '|| EMP_RECORD.FIRST_NAME);
    DBMS_OUTPUT.PUT_LINE('전체연봉: '|| LTRIM(TO_CHAR(TOTAL_SALARY, '$999,999,999,99')));
END;
/

SELECT EMPLOYEE_ID, FIRST_NAME, SALARY, SALARY*12+(NVL(COMMISSION_PCT,0)*SALARY) AS "연봉" FROM EMPLOYEES WHERE MANAGER_ID IS NULL;